
## gym_host_src

This folder contains a host program and a post_execution program. Put the XCLBIN in this folder or change the path within the host program. 

XCLBIN link to download: https://drive.google.com/file/d/1InDg85QK_Yb4-Slgy8VuII7O8VTwHMhL/view?usp=sharing


### Files
The host_program.py is used to run the benchmark for the FPGA device. There are parameters within the file that the user can manually configure for their own test.

post_exe_report.py is used to read the summary file that is produced by vitis to get the execution times and calculate the overhead and print the report to the user.

xrt.ini is in this folder because it produces the summary file from Vitis after the test.

Demo code for the conference can be seen in the demo_generate folder. 

### Running the program

#### Path
To set up the path, the user needs to set the env variable with:

```
source /opt/xilinx/xrt/setup.sh
```

#### Configurations
Next, the user should configure the parameters within the host_program.py

```
################## User input ###########################
episode_num = 10
iteration_max = 10000
parallel_env = 4
environment = 'CartPole-v1'
xclbin_kernel = "example.xclbin"
generate_report = True
#########################################################
```

#### Running the test
Now, there are two ways of running the test. 

Without report:

```
python host_program.py
```

With report:

```
make all
```

There is a makefile in this folder that will run the host_program.py then the post_exe_report.py
This is set up this way since the post execution report generated by Vitis will not be generated until host_program.py is terminated, so the separate file is needed to read in these numbers to use in the calculations. 

Users also may need to change the lines within host_program.py

```
os.environ["PYOPENCL_CTX"] = '1'
```

and 

```
dev =cl.get_platforms()[1].get_devices()
```

depending on what ports their device is connected to their computer. 


